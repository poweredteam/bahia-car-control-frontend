import {
  Accordion,
  AccordionButton,
  AccordionIcon,
  AccordionItem,
  AccordionPanel,
  HStack,
  Icon,
  Link,
  Text,
  VStack
} from '@chakra-ui/react'
import { motion } from 'framer-motion'
import { Link as ReachLink, useLocation } from 'wouter'

import { adminPages, filteredSections, PA } from '../../utilities/constans'
import AdminPage from './AdminPage'

export default function SectionSideBar() {
  const [location] = useLocation()

  return (
    <VStack spacing="0" w="full" h="70%">
      {filteredSections.map(({ title, path, activeIcon, inactiveIcon }) => {
        return (
          <HStack
            key={title}
            h="3rem"
            w="inherit"
            cursor="pointer"
            boxShadow="base">
            <Link as={ReachLink} href={path}>
              <HStack
                as={motion.div}
                pl="4"
                h="3rem"
                w="300px"
                transition="0.2s linear">
                <Icon
                  as={location === path ? activeIcon : inactiveIcon}
                  w="25px"
                  h="25px"
                />
                <Text>{title}</Text>
              </HStack>
            </Link>
          </HStack>
        )
      })}
      <Accordion allowMultiple>
        <AccordionItem boxShadow="base">
          {({ isExpanded }) => (
            <>
              <AccordionButton _expanded={{ bg: 'brand.select' }}>
                <HStack w="full">
                  <Icon
                    as={!isExpanded ? PA.inactiveIcon : PA.activeIcon}
                    w="25px"
                    h="25px"
                  />
                  <Text>{PA.title}</Text>
                  <AccordionIcon />
                </HStack>
              </AccordionButton>
              <AccordionPanel boxShadow="sm">
                {adminPages?.map(({ title, href }, i) => {
                  return (
                    <AdminPage key={title} title={title} href={href} i={i} />
                  )
                })}
              </AccordionPanel>
            </>
          )}
        </AccordionItem>
      </Accordion>
    </VStack>
  )
}
